<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="icon" type="image/vnd.microsoft.icon" href="icon.ico" />
	
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>NME Chess</title>
	
	<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	
	
	
	<script>
		window.preloadBg = "#FFFFFF";
		window.preloadFg = "#000000";
		window.addEventListener ("touchmove", function (event) { event.preventDefault (); }, false);
		if (typeof window.devicePixelRatio != 'undefined' && window.devicePixelRatio > 2) {
			var meta = document.getElementById ("viewport");
			meta.setAttribute ('content', 'width=device-width, initial-scale=' + (2 / window.devicePixelRatio) + ', user-scalable=no');
		}
	</script>
	

	<style>
		html,body { margin: 0; padding: 0; width:100%; height: 100%; overflow: hidden; }
      /* the canvas *must not* have any border or padding, or mouse coords will be wrong */
     canvas.emscripten { border: 0px none; width:100%;height:100% }
	</style>

   
	
</head>
<body>
   
   <div class="emscripten_border" id="stage" style="position:absolute;width:100%;height:100%;" >
      <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()"></canvas>
   </div>
   

    
       <script type='text/javascript'>
       // Generated by Haxe 4.1.0
(function ($global) { "use strict";
var haxe_iterators_ArrayIterator = function(array) {
	this.current = 0;
	this.array = array;
};
haxe_iterators_ArrayIterator.prototype = {
	hasNext: function() {
		return this.current < this.array.length;
	}
	,next: function() {
		return this.array[this.current++];
	}
};
var nme_preloader_HtmlPreloader = function() { };
nme_preloader_HtmlPreloader.close = function() {
	var win = window;
	var doc = win.document;
	nme_preloader_HtmlPreloader.restoreCanvas();
	nme_preloader_HtmlPreloader.canvas = null;
	nme_preloader_HtmlPreloader.context = null;
	win.preloadUpdate = null;
	win.closeProgress = null;
};
nme_preloader_HtmlPreloader.render = function(fraction) {
	var win = window;
	var w = nme_preloader_HtmlPreloader.canvas.width;
	var h = nme_preloader_HtmlPreloader.canvas.height;
	var ctx = nme_preloader_HtmlPreloader.context;
	var scale = 1;
	var bw = w - scale * 20 | 0;
	if(bw < 20) {
		bw = w;
	}
	var bh = scale * 20 | 0;
	ctx.fillStyle = nme_preloader_HtmlPreloader.bg;
	ctx.fillRect(0,0,w,h);
	ctx.strokeStyle = nme_preloader_HtmlPreloader.fg;
	ctx.lineWidth = 1;
	ctx.beginPath();
	var border = scale * 2 | 0;
	ctx.rect(((w - bw) / 2 | 0) - border,((h - bh) / 2 | 0) - border,bw + border * 2,bh + border * 2);
	ctx.stroke();
	ctx.fillStyle = nme_preloader_HtmlPreloader.fg;
	ctx.fillRect((w - bw) / 2 | 0,(h - bh) / 2 | 0,bw * fraction,bh);
};
nme_preloader_HtmlPreloader.main = function() {
	var win = window;
	nme_preloader_HtmlPreloader.bg = win.preloadBg;
	if(nme_preloader_HtmlPreloader.bg == null) {
		nme_preloader_HtmlPreloader.bg = "#b0b0b0";
	}
	nme_preloader_HtmlPreloader.fg = win.preloadFg;
	if(nme_preloader_HtmlPreloader.fg == null) {
		nme_preloader_HtmlPreloader.fg = "#000060";
	}
	var doc = win.document;
	nme_preloader_HtmlPreloader.canvas = doc.createElement("canvas");
	nme_preloader_HtmlPreloader.canvas.width = win.innerWidth;
	nme_preloader_HtmlPreloader.canvas.height = win.innerHeight;
	nme_preloader_HtmlPreloader.canvas.className = "preloader";
	var parent = doc.getElementById("stage");
	if(parent != null) {
		var oldCanvas = doc.getElementById("canvas");
		if(oldCanvas != null) {
			var oldDisplay = oldCanvas.style.display;
			oldCanvas.style.display = "None";
			nme_preloader_HtmlPreloader.restoreCanvas = function() {
				oldCanvas.style.display = oldDisplay;
				parent.removeChild(nme_preloader_HtmlPreloader.canvas);
			};
		}
	} else {
		parent = doc.body;
	}
	parent.appendChild(nme_preloader_HtmlPreloader.canvas);
	if(nme_preloader_HtmlPreloader.restoreCanvas == null) {
		nme_preloader_HtmlPreloader.restoreCanvas = function() {
			parent.removeChild(nme_preloader_HtmlPreloader.canvas);
		};
	}
	nme_preloader_HtmlPreloader.context = nme_preloader_HtmlPreloader.canvas.getContext("2d",null);
	nme_preloader_HtmlPreloader.render(0);
	win.preloadUpdate = nme_preloader_HtmlPreloader.render;
	win.closePreloader = nme_preloader_HtmlPreloader.close;
};
nme_preloader_HtmlPreloader.main();
})({});

       </script>
    

    
       <script type='text/javascript'>
       // Generated by Haxe 4.1.0
(function ($global) { "use strict";
var $estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = $hxEnums || {},$_;
function $extend(from, fields) {
	var proto = Object.create(from);
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
Math.__name__ = true;
var ParseNme = function() { };
ParseNme.__name__ = true;
ParseNme.parseNme = function() {
	try {
		var module = window.Module;
		var data = module.nmeApp;
		var bytes = haxe_io_Bytes.ofData(data);
		var magic = bytes.getString(0,4);
		if(magic != "NME$") {
			return "alert('Bad magic in .nme file')";
		}
		var len = bytes.getInt32(4);
		var headerString = bytes.getString(8,len);
		var header = JSON.parse(headerString);
		var pos = len + 8;
		len = bytes.getInt32(pos);
		pos += 4;
		var itemsString = bytes.getString(pos,len);
		var items = JSON.parse(itemsString);
		pos += len;
		module.nmeAppDataBase = pos;
		module.nmeAppHeader = header;
		module.nmeAppItems = { };
		var script = null;
		var _g = 0;
		while(_g < items.length) {
			var i = items[_g];
			++_g;
			if(i.id == "jsScript") {
				script = bytes.getString(pos + i.offset,i.length);
			} else {
				i.value = bytes.sub(pos + i.offset,i.length);
				module.nmeAppItems[i.id] = i;
			}
		}
		module.nmeApp = null;
		if(script != null) {
			return script;
		}
		return "alert('Could not find jsScript in .nme file')";
	} catch( _g ) {
		var e = haxe_Exception.caught(_g).unwrap();
		return "alert('Error parsing .nme file " + Std.string(e) + "')";
	}
};
ParseNme.main = function() {
	window.parseNme = ParseNme.parseNme;
};
var Std = function() { };
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
var haxe_Exception = function(message,previous,native) {
	Error.call(this,message);
	this.message = message;
	this.__previousException = previous;
	this.__nativeException = native != null ? native : this;
};
haxe_Exception.__name__ = true;
haxe_Exception.caught = function(value) {
	if(((value) instanceof haxe_Exception)) {
		return value;
	} else if(((value) instanceof Error)) {
		return new haxe_Exception(value.message,null,value);
	} else {
		return new haxe_ValueException(value,null,value);
	}
};
haxe_Exception.thrown = function(value) {
	if(((value) instanceof haxe_Exception)) {
		return value.get_native();
	} else if(((value) instanceof Error)) {
		return value;
	} else {
		var e = new haxe_ValueException(value);
		return e;
	}
};
haxe_Exception.__super__ = Error;
haxe_Exception.prototype = $extend(Error.prototype,{
	unwrap: function() {
		return this.__nativeException;
	}
	,get_native: function() {
		return this.__nativeException;
	}
});
var haxe_ValueException = function(value,previous,native) {
	haxe_Exception.call(this,String(value),previous,native);
	this.value = value;
};
haxe_ValueException.__name__ = true;
haxe_ValueException.__super__ = haxe_Exception;
haxe_ValueException.prototype = $extend(haxe_Exception.prototype,{
	unwrap: function() {
		return this.value;
	}
});
var haxe_io_Bytes = function(data) {
	this.length = data.byteLength;
	this.b = new Uint8Array(data);
	this.b.bufferValue = data;
	data.hxBytes = this;
	data.bytes = this.b;
};
haxe_io_Bytes.__name__ = true;
haxe_io_Bytes.ofData = function(b) {
	var hb = b.hxBytes;
	if(hb != null) {
		return hb;
	}
	return new haxe_io_Bytes(b);
};
haxe_io_Bytes.prototype = {
	sub: function(pos,len) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		return new haxe_io_Bytes(this.b.buffer.slice(pos + this.b.byteOffset,pos + this.b.byteOffset + len));
	}
	,getInt32: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getInt32(pos,true);
	}
	,getString: function(pos,len,encoding) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		if(encoding == null) {
			encoding = haxe_io_Encoding.UTF8;
		}
		var s = "";
		var b = this.b;
		var i = pos;
		var max = pos + len;
		switch(encoding._hx_index) {
		case 0:
			var debug = pos > 0;
			while(i < max) {
				var c = b[i++];
				if(c < 128) {
					if(c == 0) {
						break;
					}
					s += String.fromCodePoint(c);
				} else if(c < 224) {
					var code = (c & 63) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code);
				} else if(c < 240) {
					var c2 = b[i++];
					var code1 = (c & 31) << 12 | (c2 & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code1);
				} else {
					var c21 = b[i++];
					var c3 = b[i++];
					var u = (c & 15) << 18 | (c21 & 127) << 12 | (c3 & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(u);
				}
			}
			break;
		case 1:
			while(i < max) {
				var c = b[i++] | b[i++] << 8;
				s += String.fromCodePoint(c);
			}
			break;
		}
		return s;
	}
};
var haxe_io_Encoding = $hxEnums["haxe.io.Encoding"] = { __ename__ : true, __constructs__ : ["UTF8","RawNative"]
	,UTF8: {_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr}
	,RawNative: {_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}
};
var haxe_io_Error = $hxEnums["haxe.io.Error"] = { __ename__ : true, __constructs__ : ["Blocked","Overflow","OutsideBounds","Custom"]
	,Blocked: {_hx_index:0,__enum__:"haxe.io.Error",toString:$estr}
	,Overflow: {_hx_index:1,__enum__:"haxe.io.Error",toString:$estr}
	,OutsideBounds: {_hx_index:2,__enum__:"haxe.io.Error",toString:$estr}
	,Custom: ($_=function(e) { return {_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}; },$_.__params__ = ["e"],$_)
};
var haxe_iterators_ArrayIterator = function(array) {
	this.current = 0;
	this.array = array;
};
haxe_iterators_ArrayIterator.__name__ = true;
haxe_iterators_ArrayIterator.prototype = {
	hasNext: function() {
		return this.current < this.array.length;
	}
	,next: function() {
		return this.array[this.current++];
	}
};
var js_Boot = function() { };
js_Boot.__name__ = true;
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s = s + "\t";
				return n + "(" + ((function($this) {
					var $r;
					var _g = [];
					{
						var _g1 = 0;
						var _g2 = con.__params__;
						while(true) {
							if(!(_g1 < _g2.length)) {
								break;
							}
							var p = _g2[_g1];
							_g1 = _g1 + 1;
							_g.push(js_Boot.__string_rec(o[p],s));
						}
					}
					$r = _g;
					return $r;
				}(this))).join(",") + ")";
			} else {
				return n;
			}
		}
		if(((o) instanceof Array)) {
			var str = "[";
			s += "\t";
			var _g = 0;
			var _g1 = o.length;
			while(_g < _g1) {
				var i = _g++;
				str += (i > 0 ? "," : "") + js_Boot.__string_rec(o[i],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( _g ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var str = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		var k = null;
		for( k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str.length != 2) {
			str += ", \n";
		}
		str += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str += "\n" + s + "}";
		return str;
	case "string":
		return o;
	default:
		return String(o);
	}
};
var js_lib__$ArrayBuffer_ArrayBufferCompat = function() { };
js_lib__$ArrayBuffer_ArrayBufferCompat.__name__ = true;
js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl = function(begin,end) {
	var u = new Uint8Array(this,begin,end == null ? null : end - begin);
	var resultArray = new Uint8Array(u.byteLength);
	resultArray.set(u);
	return resultArray.buffer;
};
if( String.fromCodePoint == null ) String.fromCodePoint = function(c) { return c < 0x10000 ? String.fromCharCode(c) : String.fromCharCode((c>>10)+0xD7C0)+String.fromCharCode((c&0x3FF)+0xDC00); }
String.__name__ = true;
Array.__name__ = true;
js_Boot.__toStr = ({ }).toString;
if(ArrayBuffer.prototype.slice == null) {
	ArrayBuffer.prototype.slice = js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl;
}
ParseNme.main();
})({});

       </script>
    


    <script type='text/javascript'>
       var emrun_http_sequence_number=1;
       var emrunPost = function(msg){
          var http=new XMLHttpRequest;
          http.open("POST","stdio.html",true);
          http.send(msg)
       }

       var Module = {
        preRun: [],
        postRun: [],
        print: (function() {
          if (document.URL.search("localhost")!=-1 && document.URL.search(":693")!=-1)
             return function(text) {
               if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
               emrunPost("^out^"+emrun_http_sequence_number++ +"^"+encodeURIComponent(text));
             }
          else
            return function(text) {
            if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
            console.log(text);
          };
        })(),
        canvas: (function() {
          var canvas = document.getElementById('canvas');

          // As a default initial behavior, pop up an alert when webgl context is lost. To make your
          // application robust, you may want to override this behavior before shipping!
          // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
          canvas.addEventListener("webglcontextlost", function(e) { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);

          return canvas;
        })(),
        totalDownloads: 1,

        downloadedNmeJs: 0,
        nmeJs: null,
        binaryIsReady : false,

        downloadedNmeApp: 0,
        nmeAppLoaded: false,
        nmeApp: null,
        nmeAppDataBase: 0,
        nmeAppHeader: {},
        nmeAppItems: {},

        downloadedNmeClasses: 0,
        nmeClasses: null,

        calledRun: false,
        
        locateFile: function(filename,scriptDir) {
           if (filename=="nme.wasm") return '6.1.1/nme.wasm';
           return scriptDir + filename;
        },
        
        progress: function() {
          var loaded = this.downloadedNmeJs + this.downloadedNmeApp + this.downloadedNmeClasses;
          if (this.binaryIsReady) loaded++;


          var preloadUpdate = window.preloadUpdate;
          var fraction = loaded/this.totalDownloads;
          if ( typeof(preloadUpdate)=="function" ) preloadUpdate(fraction);

          if (this.nmeJs!=null) {
             var script = document.createElement("script");
             script.text = this.nmeJs;
             this.nmeJs = null;
             document.head.appendChild(script);
          }

          if (!this.binaryIsReady) return;
          if (!this.calledRun)
          {
             window.setTimeout(function() { Module.progress(); }, 100);
             return;
          }

          if (this.nmeClasses!=null) {
             var script = document.createElement("script");
             script.text = this.nmeClasses;
             this.nmeClasses = null;
             document.head.appendChild(script);
          }
          if ( typeof(window.nmeClassesLoaded)=="undefined")
             return;

          if (!this.nmeAppLoaded && this.nmeApp!=null) {
             var script = document.createElement("script");
             script.text = window.parseNme();
             this.nmeAppLoaded = true;
             document.head.appendChild(script);
          }
        },

        // This will get called by emsscripen code once it c++ constructors have run
        monitorRunDependencies: function(left) {
          this.totalDependencies = Math.max(this.totalDependencies, left);
          if (left==0) {
             this.binaryIsReady = true;
             this.progress();
          }
        },
        printErr: (function() {
          if (document.URL.search("localhost")!=-1 && (document.URL.search(":693")!=-1)!=-1)
             return function(text) {
               if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
               emrunPost("^err^"+emrun_http_sequence_number++ +"^"+encodeURIComponent(text));
               console.error(text);
             }
          else
            return function(text) {
            if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
            console.error(text);
          };
        })(),

        printErr: function(text) {
          if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
          console.error(text);
        },
        setStatus: function(text) {
          console.log(text);
        },
        parseNmeApp : function() {
        },
        closePreloader: function() {
           if ( typeof(window.closePreloader)!=undefined)
              window.closePreloader();
        },


      };
    </script>

    <script>
          

          (function() {
             Module.totalDownloads++;
             var xhr = new XMLHttpRequest;
             xhr.open("GET", "6.1.1/Nme.js", true);
             xhr.onload = function (e) {
               if (xhr.readyState === 4) {
                 if (xhr.status === 200) {
                   Module.downloadedNmeJs = 1;
                   Module.nmeJs =xhr.response; 
                   Module.progress();
                 } else {
                   console.error(xhr.response);
                 }
               }
             };
             xhr.onprogress = function (e) {
               Module.downloadedNmeJs = e.loaded / e.total;
               Module.progress();
             };
             xhr.send();
          }) ();


          (function() {
             Module.totalDownloads++;
             var xhr = new XMLHttpRequest;
             xhr.open("GET", "Application.nme", true);
             xhr.onload = function (e) {
               if (xhr.readyState === 4) {
                 if (xhr.status === 200) {
                   Module.downloadedNmeApp = 1;
                   Module.nmeApp =xhr.response; 
                   Module.progress();
                 } else {
                   console.error(xhr.response);
                 }
               }
             };
             xhr.onprogress = function (e) {
               Module.downloadedNmeApp = e.loaded / e.total;
               Module.progress();
             };
             xhr.responseType = 'arraybuffer';
             xhr.send();
          }) ();

          (function() {
             Module.totalDownloads++;
             window.nmeOnClasses = function() { Module.progress() };
             var xhr = new XMLHttpRequest;
             xhr.open("GET", "6.1.1/NmeClasses.js", true);
             xhr.onload = function (e) {
               if (xhr.readyState === 4) {
                 if (xhr.status === 200) {
                   Module.downloadedNmeClasses = 1;
                   Module.nmeClasses =xhr.response; 
                   Module.progress();
                 } else {
                   console.error(xhr.response);
                 }
               }
             };
             xhr.onprogress = function (e) {
               Module.downloadedNmeClasses = e.loaded / e.total;
               Module.progress();
             };
             xhr.send();
          }) ();

    </script>

    


</body>
</html>

